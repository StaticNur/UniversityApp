package com.example.universityapp.home

import android.content.Intent
import android.content.SharedPreferences
import android.os.Bundle
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.appcompat.app.AppCompatActivity
import androidx.fragment.app.Fragment
import androidx.lifecycle.ViewModelProvider
import com.example.universityapp.auth.SignInActivity
import com.example.universityapp.databinding.FragmentHomeBinding


class HomeFragment : Fragment() {
    private lateinit var binding: FragmentHomeBinding
    private lateinit var sPref: SharedPreferences
    private lateinit var viewModel: HomeViewModel

    override fun onCreateView(
        inflater: LayoutInflater, container: ViewGroup?,
        savedInstanceState: Bundle?
    ): View? {
        binding = FragmentHomeBinding.inflate(inflater, container, false)
        sPref = requireContext().getSharedPreferences("MyPref", AppCompatActivity.MODE_PRIVATE)
        return binding.root
    }

    override fun onActivityCreated(savedInstanceState: Bundle?) {
        super.onActivityCreated(savedInstanceState)
        viewModel = ViewModelProvider(this).get(HomeViewModel::class.java)
        // TODO: Use the ViewModel
        /*val ivAvatar: ImageView = binding.ivAvatar
        val imageUrl: String = "https://p.mrsu.ru/Data/imj-content/6/4/6459831e-3833-4362-ad02-30b76eb4f33a/photo/2-24b6812a-b43b-4d8e-b699-be475b100022.jpg"//"data:image/jpeg;base64,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"
        Glide.with(this)
            .load(imageUrl)
            .circleCrop()
            .into(ivAvatar)*/
        initView()

    }
    fun initView(){
        setInfoAboutUser()
        val logout = binding.bLogout
        logout.setOnClickListener{
            openRunTimeSignInActivity()
        }
    }
    fun openRunTimeSignInActivity(){
        val intent: Intent = Intent(requireActivity(), SignInActivity::class.java)
        sPref.edit().putString("saved_token", "").commit()
        startActivity(intent)
    }
    fun setInfoAboutUser(){
        NetworkHome(binding, this.requireContext(), this).execute()
    }
}